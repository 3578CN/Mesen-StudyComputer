<UserControl xmlns="https://github.com/avaloniaui"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:vm="using:Mesen.ViewModels"
	xmlns:c="using:Mesen.Controls"
	xmlns:cfg="using:Mesen.Config"
	xmlns:l="using:Mesen.Localization" mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="650" VerticalAlignment="Top" x:DataType="vm:MainMenuViewModel" x:Class="Mesen.Views.MainMenuView">
	<Design.DataContext>
		<vm:MainMenuViewModel />
	</Design.DataContext>

	<DockPanel Background="{DynamicResource MesenMenuBackground}">
		<c:MesenMenu Name="ActionMenu" DockPanel.Dock="Left">
			<MenuItem Header="{l:Translate mnuFile}" ItemsSource="{Binding FileMenuItems}" />
			<MenuItem Header="{l:Translate mnuGame}" ItemsSource="{Binding GameMenuItems}" />
			<MenuItem Header="{l:Translate mnuOptions}" ItemsSource="{Binding OptionsMenuItems}" />
			<MenuItem Header="{l:Translate mnuTools}" ItemsSource="{Binding ToolsMenuItems}" SubmenuOpened="mnuTools_Opened" />
			<MenuItem Header="{l:Translate mnuDebug}" ItemsSource="{Binding DebugMenuItems}" />
			<MenuItem Header="{l:Translate mnuHelp}" ItemsSource="{Binding HelpMenuItems}" />
		</c:MesenMenu>

			<!-- 菜单右侧显示加载的软盘镜像文件 -->
			<!-- 保持原始的竖线分隔符位置：分隔线仍停靠在菜单区域的右侧 -->
		<Rectangle Width="1" Height="18" Fill="#8A8A8A" Margin="0" VerticalAlignment="Center" DockPanel.Dock="Left" />
	<Border Name="FloppyPanel" DockPanel.Dock="Right" Background="Transparent" Margin="1,0,1,0" Padding="0" HorizontalAlignment="Right">

			<Border.ContextMenu>
				<ContextMenu>
					<MenuItem Header="磁盘管理" Click="OpenDiskManagement_Click" />
					<Separator />
					<MenuItem Header="弹出软盘" Click="EjectFloppy_Click" />
				</ContextMenu>
			</Border.ContextMenu>

			<StackPanel Name="FloppyInner" Orientation="Horizontal" VerticalAlignment="Center" Background="Transparent" HorizontalAlignment="Right">
				<!-- 竖线分隔符，背景不应覆盖它 -->
				<!-- 分隔线保留原注释，实际分隔线元素已放在 DockPanel 的菜单区域（不随 FloppyPanel 移动） -->
				<!-- 右侧内容区：悬停背景只作用到这里（FloppyContent） -->
				<Border Name="FloppyContent" VerticalAlignment="Center" Background="Transparent" Margin="3,0,0,0" Padding="2,4">
					<StackPanel Orientation="Horizontal" VerticalAlignment="Center" Background="Transparent">
						<!-- 镜像文件名先显示，磁盘指示灯放在文件名右侧 -->
						<TextBlock Name="FloppyStatusText" FontWeight="Bold" Text="{Binding FloppyStatus}" Margin="6,0,6,0" />
						<!-- 使用 Border 模拟软驱灯长方形（带细边框与圆角），默认灰色，UI 将根据核心活动更新颜色 -->
						<!-- 初始 BorderBrush 也设置为灰色，避免在 UI 初始化前出现绿色边框 -->
						<Border Name="FloppyLed" Width="14" Height="9" VerticalAlignment="Center" Margin="0,0,6,0" Background="#FF8A8A8A" BorderBrush="#FFC0C0C0" BorderThickness="1" CornerRadius="2" />
					</StackPanel>
				</Border>
			</StackPanel>
		</Border>

		<Panel Name="MenuPanel" />
	</DockPanel>
</UserControl>
